<!DOCTYPE html>

<script type="text/javascript" charset="utf-8">
  (function (g, e, n, es, ys) {
    g['_genesysJs'] = e;
    g[e] = g[e] || function () {
      (g[e].q = g[e].q || []).push(arguments)
    };
    g[e].t = 1 * new Date();
    g[e].c = es;
    ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
  })(window, 'Genesys', 'https://apps.usw2.pure.cloud/genesys-bootstrap/genesys.min.js', {
    environment: 'usw2',
    deploymentId: '0a3c5c60-5c5d-47e4-81f3-564599d87638',
    debug: true // optional - Enables Genesys browser console logging
  });
</script>

<p>Genesys Cloud WebChat test page</p>
<li> <a href="https://path-e-tech.netlify.app/webmessenger.html">Web Messenger Netlify</a> </li>
<li> <a href="https://rydev-genesys.github.io/webmessenger.html">Web Messenger Github</a> </li>

<head lang="en">
</head>
<body>


 <!-- 
  EXTRA SETUP FROM SDK FOR WEB MESSENGER
  https://developer.genesys.cloud/commdigital/digital/webmessaging/messengersdk/SDKCommandsEvents/messengerPlugin#messenger-plugin-events
-->
<script type="text/javascript" charset="utf-8">
  var bFormFilled = false;
  var bMessengerCleared = false;

  Genesys("subscribe", "Messenger.ready", function(){
      console.log('messenger ready');
      document.getElementById("startchatbutton").style.display = "block";
  });

  Genesys("subscribe", "Messenger.closed", function(){
      console.log('messenger closed');

  });

  Genesys("subscribe", "MessagingService.conversationCleared", function(){
      console.log('messenger cleared');
      bFormFilled = false;
  });
</script>


<!--
<script type="text/javascript" charset="utf-8">
  Genesys("command", "MessagingService.clearConversation", 
  {}, 
  function() {
  /*fulfilled callback*/
  },
  function() {
  /*rejected callback*/
  });
</script>

 EXTRA SETUP FROM SDK FOR WEB MESSENGER
  <script type="text/javascript" charset="utf-8">
    Genesys("subscribe", "Launcher.ready", function() {
                console.log("Launcher ready");
                });
//https://developer.genesys.cloud/commdigital/digital/webmessaging/messengersdk/SDKCommandsEvents/launcherPlugin#launcher-ready
                Genesys("subscribe", "Messenger.ready", function() {
                console.log("Messenger ready");
                setTimeout(function(){Genesys("command", "Messenger.open");},1000);
                });
//https://developer.genesys.cloud/commdigital/digital/webmessaging/messengersdk/SDKCommandsEvents/messengerPlugin#messenger-ready
                Genesys("subscribe", "Conversations.ready", function() {
                console.log("Conversations ready");
//https://developer.genesys.cloud/commdigital/digital/webmessaging/messengersdk/SDKCommandsEvents/conversationsPlugin#conversations-ready 				
                });
    </script>
-->

<!-- EXTRA SETUP DATABASE PLUGIN FOR WEB MESSENGER -->
Https://developer.genesys.cloud/commdigital/digital/webmessaging/messengersdk/pluginExamples#define-and-send-custom-attributes -->
<script type="text/javascript" charset="utf-8">
  Genesys("command", "Database.set", {
    messaging: {
      customAttributes: {
        department: "sales",
        property_type: "home_office",
        device: "mobile"
      }
    }
  });

  Genesys("command", "Database.update", {
    messaging: {
      customAttributes: {
        department: "support",
        booking_id: "54321"
      }
    }
  });
</script>


<!-- EXTRA SETUP FROM SDK FOR WEB MESSENGER
  <script type="text/javascript" charset="utf-8">
    Genesys("command", "Database.get", { 
      name: "messaging.customAttributes"},
      function (e){
        console.log(e)}
    );
  </script>
-->   

</body>
</html>
